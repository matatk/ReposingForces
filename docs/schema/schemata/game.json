{
	"$schema": "http://json-schema.org/draft-04/hyper-schema",

	"id": "schemata/game",
	"title": "Game",
	"description": "Represents a game of Chess.  Note that a game may have more than one 'round' if the rules require it.",
	"stability": "prototype",
	"strictProperties": true,
	"type": "object",

	"definitions": {
		"identity": {
			"$ref": "/schemata/game#/definitions/id"
		},
		"id": {
			"description": "Unique identifier of game",
			"example": 42,
			"readOnly": true,
			"type": "integer"
		},
		"game_type": {
			"description": "The game rules in use",
			"readOnly": true,
			"type": "string",
			"enum": ["chess", "chess960", "double-chess960"],
			"example": "double-chess960"
		},
		"player_one_name": {
			"description": "Player one's name",
			"example": "Alice",
			"readOnly": true,
			"type": "string"
		},
		"player_one_email": {
			"description": "Player one's email address",
			"readOnly": true,
			"type": "string",
			"format": "email",
			"example": "alice@chess.io"
		},
		"player_two_name": {
			"description": "Player two's name",
			"example": "Bob",
			"readOnly": true,
			"type": "string"
		},
		"player_two_email": {
			"description": "Player two's email address",
			"readOnly": true,
			"type": "string",
			"format": "email",
			"example": "bob@chess.io"
		},
		"name": {
			"description": "Name chosen for this game",
			"example": "Alice vs Bob: The Grudge",
			"readOnly": true,
			"type": "string"
		},
		"created_at": {
			"description": "When game was created",
			"example": "2012-01-01T12:00:00Z",
			"format": "date-time",
			"type": "string"
		},
		"updated_at": {
			"description": "When game was updated",
			"example": "2012-01-01T12:00:00Z",
			"format": "date-time",
			"type": "string"
		},
		"access_token": {
			"description": "A randomly-generated (by the server) token that players should be given to enable them to access the game itself",
			"example": "ga0042",
			"type": "string",
			"pattern": "^ga[0-9]{4}$"
		}
	},

	"properties": {
		"id": {
			"$ref": "/schemata/game#/definitions/id"
		},
		"name": {
			"$ref": "/schemata/game#/definitions/name"
		},
		"game_type": {
			"$ref": "/schemata/game#/definitions/game_type"
		},
		"player_one_name": {
			"$ref": "/schemata/game#/definitions/player_one_name"
		},
		"player_one_email": {
			"$ref": "/schemata/game#/definitions/player_one_email"
		},
		"player_two_name": {
			"$ref": "/schemata/game#/definitions/player_two_name"
		},
		"player_two_email": {
			"$ref": "/schemata/game#/definitions/player_two_email"
		},
		"created_at": {
			"$ref": "/schemata/game#/definitions/created_at"
		},
		"updated_at": {
			"$ref": "/schemata/game#/definitions/updated_at"
		},
		"access_token": {
			"$ref": "/schemata/game#/definitions/access_token"
		}
	},

	"links": [
		{
			"title": "Create",
			"description": "Create a new game.",
			"href": "/games",
			"method": "POST",
			"rel": "create",
			"schema": {
				"type":	"object",
				"properties": {
					"name": {
						"$ref": "/schemata/game#/definitions/name"
					},
					"player_one_name": {
						"$ref": "/schemata/game#/definitions/player_one_name"
					},
					"player_one_email": {
						"$ref": "/schemata/game#/definitions/player_one_email"
					},
					"player_two_name": {
						"$ref": "/schemata/game#/definitions/player_two_name"
					},
					"player_two_email": {
						"$ref": "/schemata/game#/definitions/player_two_email"
					},
					"game_type": {
						"$ref": "/schemata/game#/definitions/game_type"
					}
				},
				"required": [
					"name",
					"player_one_name",
					"player_one_email",
					"player_two_name",
					"player_two_email",
					"game_type"
				]
			}
		},
		{
			"title": "Info",
			"description": "Info for existing game.",
			"href": "/games/{(%2Fschemata%2Fgame%23%2Fdefinitions%2Fidentity)}?access={(%2Fschemata%2Fgame%23%2Fdefinitions%2Faccess_token)}",
			"method": "GET",
			"rel": "self"
		}
	]
}
